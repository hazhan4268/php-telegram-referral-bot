# ๐ ุฑุจุงุช ุงุฑุฌุงุน ูพุฑููู - ูุณุฎู PHP

ุฑุจุงุช ุชูฺฏุฑุงู ุงุฑุฌุงุน ู ูพุงุฏุงุด ูพุฑููู ุจุฑุง cPanel ุจุง ูุตุจ ุฎูุฏฺฉุงุฑ

## โจ ุงูฺฉุงูุงุช

### ๐ฏ ุงูฺฉุงูุงุช ฺฉุงุฑุจุฑุงู
- **ููฺฉ ุงุฎุชุตุงุต ุฏุนูุช**: ูุฑ ฺฉุงุฑุจุฑ ููฺฉ ููุญุตุฑ ุจู ูุฑุฏ ุฏุงุฑุฏ
- **๐ก ฺฏุฑุฏููู ุดุงูุณ**: ุฑูุฒุงูู ฺฉ ุจุงุฑ (1-5 ุงูุชุงุฒ)
- **ุงูุชุงุฒุฏู ุฎูุฏฺฉุงุฑ**: ูพุณ ุงุฒ ุชุฃุฏ ุนุถูุช ูููุงู
- **ุฏุฑุฎูุงุณุช ุฌุงุฒู**: ูุฑ N ุฏุนูุช = ฑ ูพุฑููู
- **๐ ุชูุงุณ ุจุง ุงุฏูู**: ุงุฑุณุงู ูพุงู ุจู ุงุฏูู ุงุฒ ุทุฑู ุฑุจุงุช
- **๐ ุฌูู ุงุฌุจุงุฑ**: ุจุฑุฑุณ ุนุถูุช ุฏุฑ ฺฉุงูุงูโูุง
- **๐ ุฌุฏูู ุจุฑุชุฑูโูุง**: ูุดุงูุฏู ฑฐ ฺฉุงุฑุจุฑ ุจุฑุชุฑ

### ๐ ูพูู ุงุฏูู
- **๐ ุขูุงุฑ**: ูููุฏุงุฑูุง ู KPI ฺฉุงุฑุจุฑุงู
- **๐ฃ ูพุงูโุฑุณุงู**: ุงุฑุณุงู ููฺฏุงู
- **๐ ูุฏุฑุช ฺฉุงูุงูโูุง**: ุงูุฒูุฏู/ุญุฐู/ุบุฑูุนุงูโุณุงุฒ
- **โ๏ธ ุชูุธูุงุช**: thresholdุ bannerุ maintenance
- **๐ฅ ฺฉุงุฑุจุฑุงู**: ุฌุณุชุฌูุ ูุดุงูุฏู ุฌุฒุฆุงุช
- **๐ ุฌูุงุฒ**: ุจุฑุฑุณ ู ูพุฑุฏุงุฒุด claimโูุง
- **๐ ูุงฺฏโูุง**: ูุดุงูุฏู ุฎุทุงูุง ู ุฑูุฏุงุฏูุง

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- โ Hosting ุจุง PHP 7.4+ ู MySQL
- โ ุฏุณุชุฑุณ ุจู cPanel
- โ Telegram Bot Token ุงุฒ [@BotFather](https://t.me/BotFather)
- โ SSL Certificate (ุชูุตู ูโุดูุฏ)

### ูุฑุงุญู ูุตุจ ุณุฑุน

#### 1๏ธโฃ ุขูพููุฏ ูุงูโูุง
ุชูุงู ูุงูโูุง ูพุฑูฺู ุฑุง ุฏุฑ ูพูุดู `public_html` ุง ฺฉ ุฒุฑูพูุดู ุขูพููุฏ ฺฉูุฏ:

```
public_html/
โโโ install.php
โโโ webhook.php
โโโ set_webhook.php
โโโ cron.php
โโโ schema.sql
โโโ .htaccess
โโโ config.sample.php
โโโ admin/
โ   โโโ index.php
โโโ includes/
    โโโ Database.php
    โโโ BotHelper.php
```

#### 2๏ธโฃ ุณุงุฎุช ุฏุชุงุจุณ MySQL

ุฏุฑ cPanel โ MySQL Databases:

1. ฺฉ ุฏุชุงุจุณ ุฌุฏุฏ ุจุณุงุฒุฏ (ูุซุงู: `mybot_db`)
2. ฺฉ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุณุงุฒุฏ (ูุซุงู: `mybot_user`)
3. ุฑูุฒ ูู ุชุนู ฺฉูุฏ
4. ฺฉุงุฑุจุฑ ุฑุง ุจู ุฏุชุงุจุณ ุงุถุงูู ฺฉูุฏ ุจุง ุชูุงู ุฏุณุชุฑุณโูุง

#### 3๏ธโฃ ุงุฌุฑุง ูุตุจโฺฉููุฏู

ุฏุฑ ูุฑูุฑฺฏุฑ ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:

```
https://yourdomain.com/install.php
```

ูุฑู ุฑุง ุจุง ุงุทูุงุนุงุช ุฒุฑ ูพุฑ ฺฉูุฏ:

**ุชูุธูุงุช ุฏุชุงุจุณ:**
- ูุงุณุช ุฏุชุงุจุณ: `localhost`
- ูุงู ุฏุชุงุจุณ: ูุงู ฺฉู ุฏุฑ ูุฑุญูู 2 ุณุงุฎุชุฏ
- ูุงู ฺฉุงุฑุจุฑ: ฺฉุงุฑุจุฑ ฺฉู ุณุงุฎุชุฏ
- ุฑูุฒ ุนุจูุฑ: ุฑูุฒ ุฏุชุงุจุณ

**ุชูุธูุงุช ุฑุจุงุช:**
- ุชูฺฉู ุฑุจุงุช: ุงุฒ @BotFather ุฏุฑุงูุช ฺฉูุฏ
- ุดูุงุณู ุงุฏูู: User ID ุฎูุฏ ุฑุง ุงุฒ @userinfobot ุจฺฏุฑุฏ
- ฺฉุงูุงู ุงุฌุจุงุฑ: (ุงุฎุชุงุฑ) ูุซุงู: `@yourchannel`

**ุชูุธูุงุช ูพูู:**
- ุฑูุฒ ุนุจูุฑ ูพูู: ฺฉ ุฑูุฒ ูู ุงูุชุฎุงุจ ฺฉูุฏ
- ุขุฏุฑุณ ุณุงุช: `https://yourdomain.com`

#### 4๏ธโฃ ุชูุธู Webhook

ุจุนุฏ ุงุฒ ูุตุจุ ุงุฒ ฺฉ ุงุฒ ุฑูุดโูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

**ุฑูุด 1: ุงุฒ ุตูุญู ูุตุจ (ุขุณุงูโุชุฑ)**

ุฑู ุฏฺฉูู "ุชูุธู ุฎูุฏฺฉุงุฑ Webhook" ฺฉูฺฉ ฺฉูุฏ.

**ุฑูุด 2: ุฏุณุช ุจุง cURL**

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
-H "Content-Type: application/json" \
-d '{
  "url": "https://yourdomain.com/webhook.php",
  "secret_token": "YOUR_SECRET_FROM_CONFIG"
}'
```

**ุจุฑุฑุณ Webhook:**

```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

#### 5๏ธโฃ ุชูุธู Cron Job

ุฏุฑ cPanel โ Cron Jobs ฺฉ job ุฌุฏุฏ ุจุณุงุฒุฏ:

**ุชูุธูุงุช:**
- ุฒูุงู ุงุฌุฑุง: `*/5 * * * *` (ูุฑ 5 ุฏููู)
- ุฏุณุชูุฑ:

```bash
php /home/username/public_html/cron.php
```

ุง ุจุง ูุณุฑ ฺฉุงูู PHP:

```bash
/usr/local/bin/php /home/username/public_html/cron.php
```

**ูฺฉุชู:** `username` ุฑุง ุจุง ูุงู ฺฉุงุฑุจุฑ cPanel ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

#### 6๏ธโฃ ูุฑูุฏ ุจู ูพูู ุงุฏูู

```
https://yourdomain.com/admin/
```

ุจุง ุฑูุฒ ฺฉู ุฏุฑ ูุฑุญูู ูุตุจ ุชุนู ฺฉุฑุฏุฏ ูุงุฑุฏ ุดูุฏ.

## ๐ฎ ุงุณุชูุงุฏู

### ุฏุณุชูุฑุงุช ฺฉุงุฑุจุฑุงู
- `/start` - ุดุฑูุน ุฑุจุงุช ู ุฏุฑุงูุช ููฺฉ ุฏุนูุช
- `/menu` - ููู ุงุตู
- `/invite` - ูุดุงูุฏู ููฺฉ ุงุฎุชุตุงุต
- `/score` - ูุดุงูุฏู ุงูุชุงุฒ ูุนู
- `/top` - ุฌุฏูู ุจุฑุชุฑูโูุง
- `/spin` - ฺุฑุฎุงูุฏู ฺฏุฑุฏููู (ุฑูุฒุงูู 1 ุจุงุฑ)
- `/claim` - ุฏุฑุฎูุงุณุช ุฌุงุฒู ูพุฑููู
- `/contact` - ุชูุงุณ ุจุง ุงุฏูู
- `/help` - ุฑุงูููุง
- `/about` - ุฏุฑุจุงุฑู ุฑุจุงุช

### ุฏุณุชูุฑุงุช ุงุฏูู (ุฏุฑ PM ุจุง ุฑุจุงุช)
- `/stats` - ุขูุงุฑ ุณุฑุน
- `/ban <uid>` - ูุณุฏูุฏ ฺฉุฑุฏู
- `/unban <uid>` - ุฑูุน ูุณุฏูุฏ
- `/give <uid> <points>` - ุงุนุทุง ุงูุชุงุฒ
- `/take <uid> <points>` - ฺฉุณุฑ ุงูุชุงุฒ
- `/r <uid> <text>` - ูพุงุณุฎ ุจู ุชูุงุณ ฺฉุงุฑุจุฑ

### ูพูู ุงุฏูู
ุชุจโูุง ููุฌูุฏ:
- **๐ ุขูุงุฑ**: ููุงุด ุขูุงุฑ ฺฉู ู ฺฉุงุฑุจุฑุงู ุงุฎุฑ
- **๐ฅ ฺฉุงุฑุจุฑุงู**: ุฌุณุชุฌู ู ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- **๐ ุฏุฑุฎูุงุณุช ุฌูุงุฒ**: ุชุฃุฏ ุง ุฑุฏ ุฏุฑุฎูุงุณุชโูุง
- **๐ ฺฉุงูุงูโูุง**: ูุฏุฑุช ฺฉุงูุงูโูุง ุงุฌุจุงุฑ
- **๐ฃ ุงุฑุณุงู ููฺฏุงู**: ุงุฑุณุงู ูพุงู ุจู ููู ฺฉุงุฑุจุฑุงู
- **โ๏ธ ุชูุธูุงุช**: ุชุบุฑ thresholdุ bannerุ maintenance
- **๐ ูุงฺฏโูุง**: ูุดุงูุฏู ุฎุทุงูุง

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```
php-referral-bot/
โโโ install.php              # ูุตุจโฺฉููุฏู ุฎูุฏฺฉุงุฑ
โโโ webhook.php              # ุฏุฑุงูุช ูพุงูโูุง ุชูฺฏุฑุงู
โโโ set_webhook.php          # ฺฉูฺฉ ุจุฑุง ุชูุธู webhook
โโโ cron.php                 # ูุธุงู ุฏูุฑูโุง
โโโ schema.sql               # Schema ุฏุชุงุจุณ MySQL
โโโ .htaccess                # ุชูุธูุงุช Apache
โโโ config.php               # ุชูุธูุงุช (ุณุงุฎุชู ูโุดูุฏ ุชูุณุท installer)
โโโ config.sample.php        # ููููู ูุงู config
โโโ README.md                # ุงู ูุงู
โโโ admin/
โ   โโโ index.php            # ูพูู ุงุฏูู ฺฉุงูู
โโโ includes/
    โโโ Database.php         # ฺฉูุงุณ ุงุชุตุงู ุจู ุฏุชุงุจุณ
    โโโ BotHelper.php        # ุชูุงุจุน ฺฉูฺฉ ุฑุจุงุช
```

## ๐๏ธ Schema ุฏุชุงุจุณ

### ุฌุฏุงูู ุงุตู
- `users` - ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู
- `referrals` - ุฏุนูุชโูุง
- `scores` - ุงูุชุงุฒุงุช
- `claims` - ุฏุฑุฎูุงุณุชโูุง ุฌุงุฒู
- `spins` - ฺฏุฑุฏููู ุดุงูุณ
- `bans` - ฺฉุงุฑุจุฑุงู ูุณุฏูุฏ ุดุฏู
- `score_logs` - ุชุงุฑุฎฺู ุงูุชุงุฒุงุช
- `settings` - ุชูุธูุงุช ุณุณุชู
- `channels` - ฺฉุงูุงูโูุง ุงุฌุจุงุฑ
- `throttle` - ูุญุฏูุฏุช ูุฑุฎ
- `last_msgs` - ูพุงูโูุง ุงุฑุณุงู ุงุฎุฑ
- `post_msgs` - ูพุงูโูุง broadcast
- `contact_state` - ูุถุนุช ุชูุงุณ ุจุง ุงุฏูู
- `admin_sessions` - session ูุง ูพุงุฏุงุฑ ุงุฏูู
- `admin_errors` - ูุงฺฏ ุฎุทุงูุง
- `logs` - ูุงฺฏโูุง ุณุณุชู
- `admin_logs` - ูุงฺฏ ุงูุฏุงูุงุช ุงุฏูู
- `sponsors` - ุงุณูพุงูุณุฑูุง
- `sponsor_views` - ุจุงุฒุฏุฏ ุงุณูพุงูุณุฑูุง
- `sponsor_clicks` - ฺฉูฺฉโูุง ุงุณูพุงูุณุฑูุง

## โ๏ธ ุชูุธูุงุช

### ูุชุบุฑูุง ูุญุท (config.php)

ูพุณ ุงุฒ ูุตุจุ ุงู ูุงู ุฎูุฏฺฉุงุฑ ุณุงุฎุชู ูโุดูุฏ:

| ูุชุบุฑ | ุชูุถุญ |
|-------|-------|
| `DB_HOST` | ุขุฏุฑุณ ุฏุชุงุจุณ (ูุนูููุงู localhost) |
| `DB_NAME` | ูุงู ุฏุชุงุจุณ |
| `DB_USER` | ูุงู ฺฉุงุฑุจุฑ ุฏุชุงุจุณ |
| `DB_PASS` | ุฑูุฒ ุนุจูุฑ ุฏุชุงุจุณ |
| `BOT_TOKEN` | ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู |
| `ADMIN_ID` | User ID ุงุฏูู (ุนุฏุฏ) |
| `ADMIN_KEY` | ุฑูุฒ ุนุจูุฑ ูพูู ุงุฏูู |
| `CHANNEL_USERNAME` | ฺฉุงูุงู ูพุดโูุฑุถ ุงุฌุจุงุฑ (ุงุฎุชุงุฑ) |
| `WEBHOOK_SECRET` | Secret token ุจุฑุง ุงููุช webhook |
| `SITE_URL` | ุขุฏุฑุณ ฺฉุงูู ุณุงุช |

### ุชูุธูุงุช ุฏุชุงุจุณ (ุฌุฏูู settings)

ุงุฒ ูพูู ุงุฏูู ูุงุจู ุชุบุฑ:

- `reward_threshold` - ุชุนุฏุงุฏ ุฏุนูุช ุจุฑุง ฺฉ ุฌุงุฒู (ูพุดโูุฑุถ: 5)
- `banner_text` - ูุชู ุจูุฑ ุฏุนูุช (ุจุง {thr} ู {link})
- `maintenance` - ุญุงูุช ุชุนูุฑุงุช (0/1)
- `bot_username` - ูุงู ฺฉุงุฑุจุฑ ุฑุจุงุช (ุฎูุฏฺฉุงุฑ)

## ๐ ุงููุช

โ **Session-based authentication** ุจุฑุง ูพูู ุงุฏูู  
โ **CSRF protection** ุจุฑุง ุชูุงู ูุฑูโูุง  
โ **Webhook secret token** ุจุฑุง ุชุฃุฏ ุฏุฑุฎูุงุณุชโูุง ุชูฺฏุฑุงู  
โ **Rate limiting** ุจุง ุณุณุชู throttle  
โ **ูุญุงูุธุช ุงุฒ ูุงู config.php** ุจุง .htaccess  
โ **SQL injection prevention** ุจุง PDO prepared statements  
โ **XSS protection** ุจุง htmlspecialchars  

## ๐ ุนุจโุงุจ

### ุฑุจุงุช ูพุงุณุฎ ููโุฏูุฏ

1. ุจุฑุฑุณ webhook:
```bash
curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"
```

2. ุจุฑุฑุณ ูุงฺฏโูุง PHP:
   - cPanel โ Error Logs
   - ุง ูุงู `/home/username/public_html/error_log`

3. ูุนุงู ฺฉุฑุฏู debug mode:
   - ุฏุฑ `config.php` ุชุบุฑ ุฏูุฏ: `define('DEBUG_MODE', true);`
   - ูุงฺฏโูุง ุฏุฑ `debug.log` ุฐุฎุฑู ูโุดูุฏ

### ุฎุทุง ุฏุชุงุจุณ

1. ุจุฑุฑุณ ุงุทูุงุนุงุช ุฏุฑ `config.php`
2. ุงุทููุงู ุงุฒ ุฏุณุชุฑุณ ฺฉุงุฑุจุฑ ุจู ุฏุชุงุจุณ
3. ุงุฌุฑุง ูุฌุฏุฏ `schema.sql`

### ุฎุทุง Webhook

1. SSL ูุนุงู ุจุงุดุฏ (HTTPS)
2. URL ุตุญุญ ุจุงุดุฏ
3. Secret token ููุฎูุงู ุฏุงุดุชู ุจุงุดุฏ

### Cron ุงุฌุฑุง ููโุดูุฏ

1. ูุณุฑ PHP ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
```bash
which php
```

2. ุฏุฑ cPanel logs ุจุฑุฑุณ ฺฉูุฏ
3. ูุฌูุฒูุง ูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
```bash
chmod 755 cron.php
```

## ๐ ุจูููโุณุงุฒ

### ุจุฑุง ุชุฑุงูฺฉ ุจุงูุง

1. **ูุนุงู ฺฉุฑุฏู OPcache** ุฏุฑ PHP
2. **ุงุณุชูุงุฏู ุงุฒ Redis/Memcached** ุจุฑุง ฺฉุด
3. **ุงูุฒุงุด TTL ฺฉุด** ุฏุฑ `BotHelper.php`
4. **ุงุณุชูุงุฏู ุงุฒ CDN** ุจุฑุง ูุงูโูุง ุงุณุชุงุชฺฉ

### ูพุงฺฏุงู ุฏุงุฏู

1. **ุงูุฏฺฉุณโูุง** ุงุฒ ูุจู ุฏุฑ schema ุชุนุฑู ุดุฏูโุงูุฏ
2. **ูพุงฺฉุณุงุฒ ุฎูุฏฺฉุงุฑ** ุจุง cron ูุนุงู ุงุณุช
3. **Backup ููุธู** ุชูุตู ูโุดูุฏ

## ๐ ุจูโุฑูุฒุฑุณุงู

1. Backup ุงุฒ ุฏุชุงุจุณ ู `config.php` ุจฺฏุฑุฏ
2. ูุงูโูุง ุฌุฏุฏ ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ (ุจู ุฌุฒ config.php)
3. schema ุฌุฏุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ (ุงฺฏุฑ ุชุบุฑ ฺฉุฑุฏู)
4. ฺฉุด ุฑุง ูพุงฺฉ ฺฉูุฏ

## ๐ ูุงฺฏ ุชุบุฑุงุช

### ูุณุฎู 1.0.0 (ุงููู)
- โ ูุตุจโฺฉููุฏู ุฎูุฏฺฉุงุฑ ุจุง UI ุฒุจุง
- โ ุณุณุชู ฺฉุงูู ุฏุนูุช ู ุงูุชุงุฒุฏู
- โ ฺฏุฑุฏููู ุดุงูุณ ุฑูุฒุงูู
- โ ูพูู ุงุฏูู ุชฺฉโุตูุญูโุง ุจุง ุชุจโูุง
- โ ุฌูู ุงุฌุจุงุฑ ฺูุฏ ฺฉุงูุงู
- โ ุชูุงุณ ุจุง ุงุฏูู
- โ ุงุฑุณุงู ููฺฏุงู
- โ ุณุณุชู ุฌูุงุฒ ฺฉุงูู
- โ Cron jobs ุจุฑุง ูพุงฺฉุณุงุฒ
- โ ูุงฺฏ ุฎุทุงูุง ู ุฑูุฏุงุฏูุง

## ๐ค ูพุดุชุจุงู

- ๐ง ุงูู: support@example.com
- ๐ฌ ุชูฺฏุฑุงู: @yourusername
- ๐ ูุจโุณุงุช: https://example.com

## ๐ License

MIT License - ุงุณุชูุงุฏู ุขุฒุงุฏ ุจุฑุง ูพุฑูฺูโูุง ุดุฎุต ู ุชุฌุงุฑ

---

**ูฺฉุชู ููู:** ุจุนุฏ ุงุฒ ูุตุจุ ุญุชูุงู ูุงู `install.php` ุฑุง ุญุฐู ุง ุชุบุฑ ูุงู ุฏูุฏ ุชุง ุงููุช ุณุงุช ุญูุธ ุดูุฏ!

```bash
rm install.php
# ุง
mv install.php install.php.bak
```

**ูููู ุจุงุดุฏ! ๐**
